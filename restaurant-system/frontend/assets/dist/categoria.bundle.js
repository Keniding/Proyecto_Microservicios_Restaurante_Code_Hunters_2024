(()=>{"use strict";"http://".concat(window.location.hostname,":8000/api"),"http://".concat(window.location.hostname,":8000/auth");var t={apiBaseUrl:"http://".concat(window.location.hostname,":8000/api")};"http://".concat(window.location.hostname,":8000/auth"),document.addEventListener("DOMContentLoaded",(function(){var e=1;fetch("".concat(t.apiBaseUrl).concat("/categories")).then((function(t){return t.json()})).then((function(n){var o=document.getElementById("categoryTableBody"),a=document.getElementById("pagination");!function c(r){o.innerHTML="";var i=10*(r-1),d=i+10;n.slice(i,d).forEach((function(e){var n=document.createElement("tr");n.setAttribute("data-id",e.id);var a=document.createElement("td");a.textContent=e.id,n.appendChild(a);var c=document.createElement("td");c.textContent=e.nombre,n.appendChild(c);var r=document.createElement("td"),i=document.createElement("button");i.textContent="Editar",i.addEventListener("click",(function(){return t=e.id,void console.log("Editar categoría con ID:",t);var t})),r.appendChild(i);var d=document.createElement("button");d.textContent="Eliminar",d.addEventListener("click",(function(){return n=e.id,o="/foodForCategory/".concat(n),a="/category/".concat(n),void fetch("".concat(t.apiBaseUrl).concat(o)).then((function(t){return t.json()})).then((function(e){e&&e.length>0?alert("No se puede eliminar esta categoría porque tiene dependencias."):fetch("".concat(t.apiBaseUrl).concat(a),{method:"DELETE"}).then((function(t){t.ok?(console.log("Categoría eliminada con éxito"),location.reload()):console.error("Error al eliminar la categoría")})).catch((function(t){return console.error("Error al eliminar la categoría:",t)}))})).catch((function(t){return console.error("Error al comprobar dependencias:",t)}));var n,o,a})),r.appendChild(d),n.appendChild(r),o.appendChild(n)})),function(){a.innerHTML="";for(var t=Math.ceil(n.length/10),o=function(t){var n=document.createElement("button");n.textContent=t,n.addEventListener("click",(function(){c(e=t)})),t===e&&n.classList.add("active"),a.appendChild(n)},r=1;r<=t;r++)o(r)}()}(e)})).catch((function(t){return console.error("Error al obtener los datos:",t)}))})),document.getElementById("addButton").addEventListener("click",(function(){var e={nombre:document.getElementById("categoryName").value},n="".concat(t.apiBaseUrl).concat("/category"),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(n,o).then((function(t){return t.json()})).then((function(t){t.success?(location.reload(),console.log("Categoría creada exitosamente")):console.error("Error al crear la categoría:",t.error)})).catch((function(t){console.error("Error:",t)}))}))})();
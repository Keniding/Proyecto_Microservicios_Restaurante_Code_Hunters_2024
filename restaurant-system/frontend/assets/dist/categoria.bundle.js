(()=>{"use strict";"http://".concat(window.location.hostname,":8000/api"),"http://".concat(window.location.hostname,":8000/auth");var t={apiBaseUrl:"http://".concat(window.location.hostname,":8000/api")};"http://".concat(window.location.hostname,":8000/auth"),document.addEventListener("DOMContentLoaded",(function(){fetch("".concat(t.apiBaseUrl).concat("/categories")).then((function(t){return t.json()})).then((function(e){var n=document.getElementById("categoryTableBody");e.forEach((function(e){var o=document.createElement("tr");o.setAttribute("data-id",e.id);var a=document.createElement("td");a.textContent=e.id,o.appendChild(a);var r=document.createElement("td");r.textContent=e.nombre,o.appendChild(r);var c=document.createElement("td"),i=document.createElement("button");i.textContent="Editar",i.addEventListener("click",(function(){return t=e.id,void console.log("Editar categoría con ID:",t);var t})),c.appendChild(i);var d=document.createElement("button");d.textContent="Eliminar",d.addEventListener("click",(function(){return n=e.id,o="/foodForCategory/".concat(n),a="/category/".concat(n),void fetch("".concat(t.apiBaseUrl).concat(o)).then((function(t){return t.json()})).then((function(e){e&&e.length>0?alert("No se puede eliminar esta categoría porque tiene dependencias."):fetch("".concat(t.apiBaseUrl).concat(a),{method:"DELETE"}).then((function(t){t.ok?(console.log("Categoría eliminada con éxito"),location.reload()):console.error("Error al eliminar la categoría")})).catch((function(t){return console.error("Error al eliminar la categoría:",t)}))})).catch((function(t){return console.error("Error al comprobar dependencias:",t)}));var n,o,a})),c.appendChild(d),o.appendChild(c),n.appendChild(o)}))})).catch((function(t){return console.error("Error al obtener los datos:",t)}))})),document.getElementById("addButton").addEventListener("click",(function(){var e={nombre:document.getElementById("categoryName").value},n="".concat(t.apiBaseUrl).concat("/category"),o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};fetch(n,o).then((function(t){return t.json()})).then((function(t){t.success?(location.reload(),console.log("Categoría creada exitosamente")):console.error("Error al crear la categoría:",t.error)})).catch((function(t){console.error("Error:",t)}))}))})();
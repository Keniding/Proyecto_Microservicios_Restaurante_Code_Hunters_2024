(()=>{"use strict";"http://".concat(window.location.hostname,":8000/api"),"http://".concat(window.location.hostname,":8000/auth");var e={apiBaseUrl:"http://".concat(window.location.hostname,":8000/api")};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}"http://".concat(window.location.hostname,":8000/auth");var a=document.getElementById("restaurant"),n=localStorage.getItem("inputData");n&&(document.getElementById("inputData").value=n);var o=[],r={};function c(){a.innerHTML="",o.forEach((function(e){var t=r[e.id_estado_mesa];if(t){var n=document.createElement("div");n.className="table ".concat(t.replace(" ","-")),n.textContent="Mesa ".concat(e.id_mesa),n.setAttribute("data-table-id",e.id_mesa),n.onclick=function(){return function(e){var t=o.find((function(t){return t.id_mesa===e}));if(t){switch(t.id_estado_mesa){case 1:t.id_estado_mesa=2,localStorage.setItem("selectedTable",JSON.stringify(t));var a=localStorage.getItem("redirectUrl");a&&(console.log("Redirigiendo a: ".concat(a)),window.location.href=a);break;case 2:t.id_estado_mesa=3;break;case 3:t.id_estado_mesa=4;break;case 4:t.id_estado_mesa=1;break;default:return void console.error("Estado desconocido para id_estado_mesa: ".concat(t.id_estado_mesa))}c()}}(e.id_mesa)},a.appendChild(n)}else console.error("Estado desconocido para id_estado_mesa: ".concat(e.id_estado_mesa))}))}function i(){var a="".concat(e.apiBaseUrl,"/estadosMesa");fetch(a).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(a){var n;a.forEach((function(e){r[e.id_estado_mesa]=e.nombre.toLowerCase()})),(n=document.getElementById("legend")).innerHTML="",Object.entries(r).forEach((function(e){var a,o,r=(o=2,function(e){if(Array.isArray(e))return e}(a=e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,o,r,c,i=[],s=!0,d=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=r.call(a)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){d=!0,o=e}finally{try{if(!s&&null!=a.return&&(c=a.return(),Object(c)!==c))return}finally{if(d)throw o}}return i}}(a,o)||function(e,a){if(e){if("string"==typeof e)return t(e,a);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,a):void 0}}(a,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=(r[0],r[1]),i=document.createElement("div");i.className="legend-item";var s=document.createElement("div");s.className="legend-color ".concat(c.replace(" ","-"));var d=document.createElement("div");d.className="legend-text",d.textContent=c.charAt(0).toUpperCase()+c.slice(1),i.appendChild(s),i.appendChild(d),n.appendChild(i)})),function(){var t="".concat(e.apiBaseUrl,"/mesas");fetch(t).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){o=e,c()})).catch((function(e){console.error("Error al obtener las mesas:",e)}))}()})).catch((function(e){console.error("Error al obtener los estados de mesa:",e)}))}document.addEventListener("DOMContentLoaded",(function(){i()}))})();
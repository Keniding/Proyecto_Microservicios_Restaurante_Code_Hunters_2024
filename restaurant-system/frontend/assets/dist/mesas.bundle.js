(()=>{"use strict";"http://".concat(window.location.hostname,":8000/api"),"http://".concat(window.location.hostname,":8000/auth");var e={apiBaseUrl:"http://".concat(window.location.hostname,":8000/api")};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}"http://".concat(window.location.hostname,":8000/auth");var n=document.getElementById("restaurant"),a=[],o={};function r(){n.innerHTML="",a.forEach((function(e){var t=o[e.id_estado_mesa];if(t){var c=document.createElement("div");c.className="table ".concat(t.replace(" ","-")),c.textContent="Mesa ".concat(e.id_mesa),c.onclick=function(){return function(e){var t=a.find((function(t){return t.id_mesa===e}));if(t){switch(t.id_estado_mesa){case 1:t.id_estado_mesa=2;break;case 2:t.id_estado_mesa=3;break;case 3:t.id_estado_mesa=4;break;case 4:t.id_estado_mesa=1;break;default:return void console.error("Estado desconocido para id_estado_mesa: ".concat(t.id_estado_mesa))}r()}}(e.id_mesa)},n.appendChild(c)}else console.error("Estado desconocido para id_estado_mesa: ".concat(e.id_estado_mesa))}))}function c(){var n="".concat(e.apiBaseUrl,"/estadosMesa");fetch(n).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(n){var c;n.forEach((function(e){o[e.id_estado_mesa]=e.nombre.toLowerCase()})),(c=document.getElementById("legend")).innerHTML="",Object.entries(o).forEach((function(e){var n,a,o=(a=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,c,s=[],i=!0,d=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(a=r.call(n)).done)&&(s.push(a.value),s.length!==t);i=!0);}catch(e){d=!0,o=e}finally{try{if(!i&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(d)throw o}}return s}}(n,a)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=(o[0],o[1]),s=document.createElement("div");s.className="legend-item";var i=document.createElement("div");i.className="legend-color ".concat(r.replace(" ","-"));var d=document.createElement("div");d.className="legend-text",d.textContent=r.charAt(0).toUpperCase()+r.slice(1),s.appendChild(i),s.appendChild(d),c.appendChild(s)})),function(){var t="".concat(e.apiBaseUrl,"/mesas");fetch(t).then((function(e){if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})).then((function(e){a=e,r()})).catch((function(e){console.error("Error al obtener las mesas:",e)}))}()})).catch((function(e){console.error("Error al obtener los estados de mesa:",e)}))}document.addEventListener("DOMContentLoaded",(function(){c()}))})();